<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title>预览</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://www.layuicdn.com/layui/css/layui.css" media="all">
    <style>
        .title-top {
            background-color: #fff;
            position: fixed;
            width: 100%;
        }
        .flow-default li {
            margin: 0 auto;
            width: 80%;
            padding-top: 20px;
        }
        .flow-default {
            flex-direction: column;
            justify-content: center;
            padding-top: 50px;
        }
        .img_src {
            border-radius: 10px;
            border: solid 10px #EFEFEF;
            box-shadow: 0 10px 100px rgb(0 0 0 / 30%);
        }
        /* 移动端 */
        @media screen and (max-width: 768px) {
            #legend {
                font-size: 14px
            }
            .flow-default {
            flex-direction: column;
            justify-content: center;
            padding-top: 100px;
            padding-bottom: 100px;
            }
        }
    </style>
</head>
<body>

<div class="title-top">
<fieldset class="layui-elem-field layui-field-title ">
    <legend id="legend">
        {% if inf %}
            {{ inf.kind }}{{ inf.title }} - {{ inf.quality }} - Size:{{ inf.all_size }}MB - Avg:{{ inf.avg_size }}MB -
            Nums:{{ inf.img_size }}P - PC:{{ inf.pcImg }}P - Phone:{{ inf.phoneImg }}P -Time:{{ inf.create_date }}
        {% endif %}
    </legend>
</fieldset>
</div>
<ul class="flow-default" id="previewImg"></ul>


<!-- 注意：项目正式环境请勿引用该地址 -->
<script src="https://www.layuicdn.com/layui-v2.6.8/layui.js"></script>

<script>
    layui.use('flow', function () {
        const flow = layui.flow;
        let srcList = []
        {% for i in img %}
            srcList.push("{{ i.url }}")
        {% endfor %}
        flow.load({
            elem: '#previewImg' //流加载容器
            ,scrollElem: '#previewImg' //滚动条所在元素，一般不用填，此处只是演示需要。
            ,isAuto: false
            ,isLazyimg: true
            , done: function (page, next) { //执行下一页的回调
                setTimeout(function () {
                    const lis = [];
                    let index = 0
                    for (let i = 0; i < 5; i++) {
                        index = (page-1)*5 + i
                        if (index<srcList.length){
                        lis.push('<li><img class="img_src" style="width: 100%" alt="" src=' + srcList[index] + '></li>')
                        }else {
                            break
                        }
                    }
                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    next(lis.join(''), index<srcList.length);
                }, 500);
            }
        });
    });
</script>

</body>
</html>